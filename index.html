<!DOCTYPE html>
<html>
  <head>
    <title>The Loop Breaker</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@coinbase/wallet-sdk@3.12.0/dist/coinbase-wallet-sdk.umd.min.js"></script>
  </head>
  <body style="text-align:center; font-family:sans-serif; margin-top:100px; background:#111; color:#00ffcc;">
    <h1>The Loop Breaker</h1>
    <p>Official site of Uncloned â€” a belief-backed protocol.</p>
    <br />
    <button onclick="connectWallet()" style="padding:10px 20px; font-size:16px;">Connect Wallet</button>
    <p id="walletAddress" style="margin-top:20px;"></p>

    <script>
      async function connectWallet() {
        const walletAddressEl = document.getElementById("walletAddress");

        if (typeof window.ethereum !== "undefined") {
          // MetaMask path
          try {
            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
            walletAddressEl.innerText = "Connected: " + accounts[0];
            return;
          } catch (error) {
            walletAddressEl.innerText = "MetaMask error: " + error.message;
          }
        }

        // Fallback to Coinbase Wallet
        const CoinbaseWalletSDK = window.CoinbaseWalletSDK;
        const APP_NAME = "The Loop Breaker";
        const APP_LOGO_URL = "https://theloopbreaker.com/logo.png";
        const DEFAULT_ETH_JSONRPC_URL = "https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID";
        const DEFAULT_CHAIN_ID = 1;

        const coinbaseWallet = new CoinbaseWalletSDK({
          appName: APP_NAME,
          appLogoUrl: APP_LOGO_URL,
          darkMode: true
        });

        const ethereum = coinbaseWallet.makeWeb3Provider(DEFAULT_ETH_JSONRPC_URL, DEFAULT_CHAIN_ID);
        const web3 = new Web3(ethereum);

        try {
          const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
          walletAddressEl.innerText = "Connected: " + accounts[0];
        } catch (err) {
          walletAddressEl.innerText = "Coinbase error: " + err.message;
        }
      }
    </script>
  </body>
</html>
